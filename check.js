const fs = require('fs');

// Genesis nodes
const genesisNodeReward = {
  theFirmCommunityCookieFactor: {
    '0x8ae1874f2F9f26Eeecf1855aDEC19F530e3CdEaa': '0.0009863013699',
    '0x8EA17df89317a6e8f9EDB6E97c9f71D764c55596': '3.193643836',
    '0xE6bc94BcB63EE208fd6899498A91418f9E9F5548': '3.156164384',
    '0x5fd9C4368ee7E8fc79e48fBa390c148fd16453Ee': '3.106388712',
    '0x326d516587ffe78053cd292FC2979406ad29bbDD': '2.169863014',
    '0x3b7a5Aee7B593b7f2E3DB0dfeA3FFc734eC10438': '1.973589041',
    '0x748EC2E752b038e5F3e69489833BD585EF49A92a': '1.600767123',
    '0x9eaA601b9Bdc72A89aa6fDe1FA07428612b555E4': '1.578082192',
    '0x1386D4EA93EB572Ae99b497735Eb7D94B00c1050': '1.479452055',
    '0xCa83A74291e78B534b9EF1D0047a663942645741': '0.9863013699',
    '0x69D3277B0f2dbBd97f666cfDE812e347ED26cc9a': '0.9863013699',
    '0xBd2b3570E7FABD201eDeDe7c7d41F2831cE3652A': '0.8225753425',
    '0x5cc7719857713709aD18a1b24fFb2478780127e2': '0.6826704658',
    '0xa91B82084b37b01a7B5FD60160EeF7b04302517f': '0.530630137',
    '0x03214Abc9effA59a61649A5fAc320A3cCbF98B79': '0.5030136986',
    '0x969552848E3B0A3E839B2b298E39D71881FF5327': '0.4931506849',
    '0x38c556dEb5E0717a47ac621a5891252F50d9C87c': '0.4438356164',
    '0xb97Ce8F7fa5864505a06777117dCE2b87337dF30': '0.3945205479',
    '0xd439ACcb5c6B1f93f19A2e80F408c76b6579D07F': '0.2860273973',
    '0xA88bd387006B0fc452FD7934fb9Faa8E7A1aA8D9': '0.2357260274',
    '0xcFdc2bfD2c59499300f4f7372cD9B1E9AE4cd075': '0.2051506849',
    '0xc95D683346D394Cda349f142871510DbE09EadeD': '0.1538630137',
    '0xDf6403e36c70B0E5151272f776233b156c8E000E': '0.1479452055',
    '0x37B76b23703bAca73F964Ca6c2f8bD6018f3dD11': '0.1479452055',
    '0x4acbA0876Cb0D9Dd8992ABC743333E686b4EF71A': '0.1351834521',
    '0x964DcAbeb569dAfc8391A28c9E87F6e293fCB114': '0.1075068493',
    '0x35A1be7e44ae96034b5B7726a27131Ba31BB7F41': '0.09863013699',
    '0xb909Cc59527BB84C4129A18DfB17F1f95c2f9540': '0.09863013699',
    '0x69Db3A04391eA1EAAcAa340Fcf4364791AAbC443': '0.07726191781',
    '0x198ca1beaCF70b82c4e6dE21E8Cb7b6dA6D8477A': '0.05476536986',
    '0x0D205efD9f21B59B3608013252EDEF572F9f234C': '0.03977457534',
    '0x35c096fBBeeF7cd42b79E5f8E3fB7709eb4B8248': '0.03798443836',
    '0x94dd84e72f56FBD3678a0D5264C7acD00D9971aC': '0.03464876712',
    '0x6154ee6FaED512921A15c27b9290219dFA422a79': '0.03442191781',
    '0xE6EAc0f55E3F5eCEFAe3877015fb8631C95a3a45': '0.03400372603',
    '0x45Ada6503D4dFC97f70d00790eB03D1C460B943c': '0.02860273973',
    '0x826E88287aF71CD1B89e16Edf979B7B997DA7F83': '0.02741424658',
    '0x1274ABefc061bdFe37FE0cc28b26B7396C08b321': '0.02672186301',
    '0xdb7c3efC25AB85de2460938f20d39b23E94Fc804': '0.02231408219',
    '0x91968E4bde01E1dD5d595AE4d5CAF306797b6d87': '0.02128339726',
    '0x3ec221A25B2dCf5634e4ff0aF3b07ea17AE8D002': '0.01984832877',
    '0x5e1BECfEe78D1b69eEAE019D6a083bf993f6Cc3d': '0.01102487671',
    '0x9693200746C056Bb3E548B6A25c5Fb1d5db2d874': '0.01026246575',
    '0xD1F8155C20C375A2c2CbDF73860b1005c7cB2873': '0.008876712329',
    '0xE29304F861d38Cee951770Cb5a23AC3CceD3FBaE': '0.008521643836',
    '0xAe8Da4A9792503f1eC97eD035e35133A9E65a61f': '0.007890410959',
    '0x19e923a5C8E0661259402bf398ed7668908226d0': '0.004931506849',
    '0x08276C87936B7509012f98CB482DA92754E66eC2': '0.00295890411',
    '0x8499184b624264F199Ba90fbF0e894C379B89C78': '0.002436164384',
    '0xe48C53F8b02Ac43B48dBa3FabeC0E2a8E36B3C0A': '0.00199430137',
    '0xc8b42A0391DD92B8b8Ea08CbAadecfAa9A1B46C2': '0.00197260274',
    '0x1B62243A1ff8D645A61011d4c4DD33eB295419f4': '0.001379835616',
    '0x337A8971C8ED58FA151190798572946B86c3f545': '0.0009863013699',
    '0x2371983011533f7d88efc27e87b2982A863B2724': '0.000009863013699',
    '0x1De8EE475989A81a353ec6e4ea5a5C0aC60642d0': '0',
    '0x6B26d01bC7E0e92bb849Ee34d9BbCD4e03a8361F': '0',
  },
  quantumSamOrai: {
    '0xD891D5F41a45C86f0A70D273767B84B3befcDe95': '4.931506849',
    '0xE6bc94BcB63EE208fd6899498A91418f9E9F5548': '3.945205479',
    '0xCa83A74291e78B534b9EF1D0047a663942645741': '2.95890411',
    '0x288DfFBF05906381E0b96C2FB8c1961e16851ac7': '1.578082192',
    '0xc42A0e898c38E073137ccAeCb9D49748DCcF5cb5': '1.010958904',
    '0xbf5d3Fc4300Eae8730feC11B46376592099F4C3B': '0.9093688767',
    '0x969552848E3B0A3E839B2b298E39D71881FF5327': '0.4931506849',
    '0x26655D43E3DFA4f7ef6Ee94cef70Eb64632E6D59': '0.3510433973',
    '0x9da72BE487b964d2afC12d937614e13EcB6F8eAA': '0.311069589',
    '0xb0487bdc8BE66895Eb1508062c73d14Bb18A88Ca': '0.1430136986',
    '0xb73285d60eF3Ff2ed3Abf3f5B0696796cE3f22Ac': '0.1084931507',
    '0xC77c6eAB64FB3986CEEae9a76081Dd2097EDcd0c': '0.1042707945',
    '0x04d50dae507E89347DD768Ee5a78cE656f85a704': '0.1027321644',
    '0xFdbaE271a4cBD081794FD87489c84f841852e0Bc': '0.1005435616',
    '0x396318f99F636C83117ecf6a7670999581877025': '0.09961643836',
    '0x8499184b624264F199Ba90fbF0e894C379B89C78': '0.09617917808',
    '0x93020e26083769eFA969e6CFfec7b0Bac67C378e': '0.05067517808',
    '0xb685D2A0068456b142a8269FfCbf19b1E18A5bD5': '0.03747945205',
    '0x7434fa91Ff058bA409074b1EaEF03F8741C5Af59': '0.03149852055',
    '0x3e4A503ea62ff44c9611c04Cf2A46AC8eFf3d053': '0.03141468493',
    '0x3e0A48fa9ED56cD4fe6303206D033865b2AFbc1D': '0.02944306849',
    '0x446A56E78de87E8D36D5f4Adf783b4fd7BAfAc12': '0.02857512329',
    '0x2B8E14ab9cff40321338E34b94ecA23870850F5C': '0.02680668493',
    '0xfb1F2B7D351A5594449bE4DaFBFe3247AEfCBcE3': '0.02353117808',
    '0x91968E4bde01E1dD5d595AE4d5CAF306797b6d87': '0.02081884932',
    '0x9b45c38b011798ACA9dFd842a824324970b40518': '0.01564767123',
    '0xdb7c3efC25AB85de2460938f20d39b23E94Fc804': '0.007277917808',
    '0x0cBe393a9F3cE40575939103d849587D30e5357D': '0.002998356164',
    '0x262b61F985C7911aD45aaf9a09e39a69208F0B69': '0',
    '0xE9320314D109d41380CBc06BAFddd834db9ae71D': '0',
  },
  oraiVanguard: {
    '0x5Ba42Ff329eA75510430b60B6DBCd7986D1a8e20': '2.658148274',
    '0x68bC0327FC91e859dA05Eb6ba6E7a48dEc566796': '1.333798027',
    '0x9B3fBCC8890851540797F3838B6B4b990474eEf6': '0.8679452055',
    '0xD1F8155C20C375A2c2CbDF73860b1005c7cB2873': '0.7397358904',
    '0x91e3423fB03C32ca2cb86f3246c6f57555E3aA5E': '0.4941369863',
    '0x77B07A432AE7A959fe9A90bB5B11C6ae9984Bcd7': '0.4931506849',
    '0x778B8183aF396c434C0EEe6858837B5128CE9b58': '0.4931506849',
    '0x2aE9Ada4a84b8B1c31639546f3FFf91eb786647A': '0.4931506849',
    '0x8d6762cE0Ae6f1e6135c62955CC00c5c4Ee06C56': '0.4103013699',
    '0x9da72BE487b964d2afC12d937614e13EcB6F8eAA': '0.3106849315',
    '0x66D45a58CF49f054938c0a288793c420Fe98bB04': '0.2584109589',
    '0x62a1ea11117e69F73e2e61B7388865b76b0514D0': '0.2475616438',
    '0xD891D5F41a45C86f0A70D273767B84B3befcDe95': '0.2465753425',
    '0x93ca1E3d7b3706836F9D29D44e91698E4C5Dd55A': '0.2169863014',
    '0x79CfA7F84Ef2865B759DE90B8D63ea974A7393ad': '0.1505204384',
    '0xf4245b57FCE109E7f9acB5a1739bC0Ce12A60A07': '0.1488644384',
    '0xE622863579ed6b32c1996B4623E8B7D2E30EFCFa': '0.1441972603',
    '0xB3426078E2BC85eDDeA342f2a5Dcf0b24e70bF4b': '0.1035616438',
    '0xF0Ba2Acba805B4AF89A9E0848A28DCD510b89569': '0.09863013699',
    '0x1De8EE475989A81a353ec6e4ea5a5C0aC60642d0': '0.08975342466',
    '0x35A1be7e44ae96034b5B7726a27131Ba31BB7F41': '0.06410958904',
    '0x9fC03C5Be75EF984dE7C2DB5dE864333d3E8c1Ce': '0.03541216438',
    '0x5091081516C8695Dfa1BfdE3d7b33480C2cB2FcA': '0.0295890411',
    '0xF1ceBC5F4569984c5C82a35AC722b4b5225f6beF': '0.0197260274',
    '0xf46FCE50b99BdFB62e89eF2AF09A800cFb87Ea42': '0.009863013699',
    '0x45Ada6503D4dFC97f70d00790eB03D1C460B943c': '0.009863013699',
    '0xee1c67b28Ee0552844cF23d7B7C00aCf32363879': '0.009863013699',
    '0x0B4270B40820229fE10AFBe88bc714111ee9258E': '0.004458082192',
    '0x262b61F985C7911aD45aaf9a09e39a69208F0B69': '0',
  },
}


// Trusted nodes
const trustedNodeReward = {
  theFirmSamOraiD: {
    '0x326d516587ffe78053cd292FC2979406ad29bbDD': '1.582191781',
    '0xb86802bD7ECBBb89cD0c8e3bD941251D2255f367': '1.356164384',
    '0xD1F8155C20C375A2c2CbDF73860b1005c7cB2873': '0.3842465753',
    '0x8e053EfBC3dC7a413D93d7C2a208EBad11CC99F3': '0.2251232877',
    '0xfD2E1B72beC34c50127AD9305a5c6a9e4e830eE6': '0.2034246575',
    '0x8EA17df89317a6e8f9EDB6E97c9f71D764c55596': '0.1961917808',
    '0xCA1719ed13435c94166c977bCE8A2af8b55FAc95': '0.1699726027',
    '0x22A993fe21369ff202ad16b802D5612F221390B0': '0.1264578082',
    '0x3ec221A25B2dCf5634e4ff0aF3b07ea17AE8D002': '0.1175342466',
    '0x5cc7719857713709aD18a1b24fFb2478780127e2': '0.07164164384',
    '0x45Ada6503D4dFC97f70d00790eB03D1C460B943c': '0.05424657534',
    '0xDcf231d20d0061885DbAa310c9dB6F97A5bfD175': '0.04923057534',
    '0xbC59B8C76272F8b2AcC757197f7D1CC4e794f6CB': '0.04520547945',
    '0x896119d5aC0D99d993d920e1f211B7265867897F': '0.04520547945',
    '0x3f83E3b9Ec420c2C96E7DFdEAd87155ef7388923': '0.04520547945',
    '0xa6f2b3dF509383E78cd5a500676bEAA63968f8C1': '0.04520547945',
    '0xe0ffa08A1CEC12E1383953d779Fc93C226e80761': '0.04520547945',
    '0xb8c310afE97fE0f2bE75EE8635186bc065876AAE': '0.04520547945',
    '0xa34A4Aac320a184aB85D927923f4587Df6015dEC': '0.04520547945',
    '0x21797bBc5b88bB7F5b94DE98FaB058F5987Eb060': '0.02891161644',
    '0xb73285d60eF3Ff2ed3Abf3f5B0696796cE3f22Ac': '0.02712328767',
    '0xF6f91E675494135F952FCdDdee059C3b4249115b': '0.009945205479',
  },
  stakement: {
    '0x4ce7D126DCB606008A711B46c2d8DF50D88e4244': '1.595663014',
    '0x9C2c3b36FbCE13eFB602750eF3403291824fa338': '0.642369863',
    '0x88Ed47e5f2588Bc14dF150e49DcBc2aA615f746f': '0.5943978082',
    '0x969552848E3B0A3E839B2b298E39D71881FF5327': '0.4527419178',
    '0x60107E502b09EB7465552eb419Bd0938E0b6F0E0': '0.3092054795',
    '0x1C7631Dce2b7A555680d0541F6DFcCf48e5C6E60': '0.2260273973',
    '0x396318f99F636C83117ecf6a7670999581877025': '0.1717808219',
    '0xb97Ce8F7fa5864505a06777117dCE2b87337dF30': '0.1413023836',
    '0x3678F32bE7a9998c61EC05d940a9F3a0Cf70D4a8': '0.1345523014',
    '0xDf6403e36c70B0E5151272f776233b156c8E000E': '0.1283835616',
    '0x2E072495e0ab59bc0aD1060AE8dEec76bbc401a2': '0.0904109589',
    '0x9D4c1C518442aD9Eb23cb79A4792D508b49c81af': '0.0855079726',
    '0xCE12bD75441ed2c9A5b77a8A9580CE1E976A61DC': '0.06914358904',
    '0x7C040C78cadD3ABC3fDC11A5151a305577915C5e': '0.0441259726',
    '0x1274ABefc061bdFe37FE0cc28b26B7396C08b321': '0.01175342466',
    '0x5fbFe9fC869C4481fF7BD084ece84162e4210420': '0.01000306849',
    '0x5E79289C230b3A85D66d4bF47e100d3C5097F3dA': '0.003957287671',
    '0x337A8971C8ED58FA151190798572946B86c3f545': '0.001808219178',
  },
  banana: {
    '0x9eaA601b9Bdc72A89aa6fDe1FA07428612b555E4': '0.904109589',
    '0x5ff328b43F70281b568e8d1707B6F2712a48e6bf': '0.8136986301',
    '0x2Ad00ea39566481723Da076CA727095e5Ad26084': '0.05424657534',
    '0x218DfF3cD29502f48A8d9782579a4B6CaF109750': '0.0415890411',
    '0x0B4270B40820229fE10AFBe88bc714111ee9258E': '0.002603835616',
  },
  antorai: {
    '0x406cD9B0B56f3D9C9C70ca542F0968ddFbF93C4b': '0.6780821918',
    '0x8651402A4Ba0AEAEF80B6A37225666656A6a8e7F': '0.5734866575',
    '0x8F3354262f268C5897e447Bc2A53074080b8cb8d': '0.1103013699',
    '0xD891D5F41a45C86f0A70D273767B84B3befcDe95': '0.04520547945',
    '0x3a96d6BE1Af1236c7aC6a0D6d1322Ae01AF24c4d': '0.01602443836',
    '0xbDd9BE8555eA246BF2800C0abF2509426636E9D3': '0.01184383562',
    '0x743Ef32A0749192d5e2287ab30cc81e5db3E9697': '0.00904109589',
    '0x31EFE0Abf3840f78cfFf414b44A2846fe13e4688': '0.004723972603',
  },
  Serenity: {
    '0x9FAA0E6Ee06f89fb88E74DB5099006Ae1fA702c8': '1.190812685',
  },
  stakeWithKing: {
    '0x6948E44C75C22A3B362A4AfD949f0Ec90AC7318e': '0.6780821918',
    '0x9dDa85a68c84B04aC5328f454529cec5C3fd6aBD': '0.2264667945',
  },
  arneV: {
    '0x24BfA0B0780A39B4d08Dcf88736dcF5A79B7D267': '0.6780821918',
    '0x17C10b41F3706Ecd8CED74b9B498b50e74a103B9': '0.1323327123',
  },
  titan: {
    '0xFC13Da87690d167A3cEB9F07Af735AeD3D8ffBb2': '0.6780821918',
  },
}

/**
 * Add big number
 * @param f {string}
 * @param s {string}
 * @returns {string}
 */
function addBig(f, s) {
  if (f.length < s.length) {
    [f, s] = [s, f];
  }
  let rs = [];
  let carryOut = 0, i;
  const temp1 = f.split('').reverse();
  const temp2 = s.split('').reverse();
  for (i = 0; i < temp1.length && i < temp2.length; ++i) {
    const sum = parseInt(temp1[i]) + parseInt(temp2[i]) + carryOut;
    if (sum > 9) {
      carryOut = 1;
    } else {
      carryOut = 0;
    }
    rs.push(sum % 10);
  }

  if (i === temp2.length) {
    if (carryOut === 1) {
      for (; i < temp1.length; ++i) {
        const sum = parseInt(temp1[i]) + carryOut;
        if (sum > 9) {
          carryOut = 1;
        } else {
          carryOut = 0;
        }
        rs.push(sum % 10);
      }
      if (carryOut === 1) {
        rs.push(1);
      }
    } else {
      rs = rs.concat(temp1.slice(i));
    }
  }
  return rs.reverse().join('');
}

/**
 * Add two number
 * @param a {string} number with format xxx.yyy
 * @param b {string} number with format xxx.yyy
 * @return {string}
 */
const add = (a, b) => {

  const getDebt = numb => {
    const dotIndex = numb.indexOf('.');
    if (dotIndex !== -1) {
      return numb.substring(dotIndex + 1).length;
    }
    return 0;
  };

  const debtA = getDebt(a);
  const debtB = getDebt(b);
  const debt = Math.max(debtA, debtB);
  for (let i = 0; i < debt - debtA; i++) {
    a += '0';
  }
  for (let i = 0; i < debt - debtB; i++) {
    b += '0';
  }
  a = a.replace('.', '');
  b = b.replace('.', '');

  const tempResult = addBig(a, b);


  // pay debt
  const integerPart = tempResult.substring(0, tempResult.length - debt);
  const fractionPart = tempResult.substring(tempResult.length - debt);
  return (integerPart + '.' + fractionPart).replace(/(\.)?0+$/, '');
};
console.log(add('0', '0'));
const input1 = fs.readFileSync('./input3.txt', 'utf8').split('\n').reduce((o, prev) => {
  const [erc20Addr, nativeAddr] = prev.trim().split(',');
  o[erc20Addr] = nativeAddr;
  return o;
}, {});

// const input2 = fs.readFileSync('./input2.txt', 'utf8').split('\n').reduce((o, prev) => {
//   const [erc20Addr, nativeAddr] = prev.trim().split(',');
//   o[erc20Addr] = nativeAddr;
//   return o;
// }, {});

const input = Object.assign(input1);

const genesisValidatorsRewardDays = 68;
const trustedValidatorsRewardDays = 54;

fs.writeFileSync('output.txt', '');
for (const erc20 in input) {
  let genesisReward = '0';
  let trustedReward = '0';
  // sum up genesis reward;
  for (const type in genesisNodeReward) {
    if (genesisNodeReward[type].hasOwnProperty(erc20)) {
      genesisReward = add(genesisReward, genesisNodeReward[type][erc20]);
    }
  }

  // sum up trusted reward
  for (const type in trustedNodeReward) {
    if (trustedNodeReward[type].hasOwnProperty(erc20)) {
      trustedReward = add(trustedReward, trustedNodeReward[type][erc20]);
    }
  }
  if (genesisReward === '0' && trustedReward === '0') {
    continue;
  }
  // write data
  const output = `${input[erc20]}\t${genesisReward}\t${genesisValidatorsRewardDays}\t\t${trustedReward}\t${trustedValidatorsRewardDays}\t\t${erc20}\n`;
  fs.appendFileSync('output.txt', output);
}
